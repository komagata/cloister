- content_for :head do
  = javascript_include_tag "prototype"
  = javascript_include_tag "jquery-1.3.2.min"
  = javascript_include_tag "jquery.wysiwyg"
  = calendar_date_select_includes "red", :locale => "ja"
  = stylesheet_link_tag "jquery.wysiwyg"
- form_for @doc do |f|
  = f.error_messages
  %p
    = f.label :title, "Title", :class => "label"
    %br
    = f.text_field :title, :class => "text_field"
  %p
    = f.label :body, "Body", :class => "label"
    %br
    = f.text_area :body, :class => "text_area"
  %p
    = f.label :created_at, "Posted at", :class => "label"
    %br
    = f.calendar_date_select :created_at, :time => true, :popup => :force, :alt => "Input from callendar", :class => "text_field_small"
  %p
    = f.label :updated_at, "Updated at", :class => "label"
    %br
    = f.calendar_date_select :updated_at, :time => true, :popup => :force, :alt => "Input from callendar", :class => "text_field_small"
    %br
  %p
    = f.submit submit_label, :onclick => "editor.save()"
= focus "doc_title"
:javascript
  $(function() {
    $('#doc_body').wysiwyg({
      controls : {
        separator01 : { visible : true },
        separator03 : { visible : true },
        separator04 : { visible : true },
        separator00 : { visible : true },
        insertOrderedList : { visible : true },
        insertUnorderedList : { visible : true },
        undo: { visible : true },
        redo: { visible : true },
        justifyLeft: { visible : true },
        justifyCenter: { visible : true },
        justifyRight: { visible : true },
        justifyFull: { visible : true },
        subscript: { visible : true },
        superscript: { visible : true },
        underline: { visible : true },
        html: {
          visible : true,
          exec    : function() {
            if ( this.viewHTML ) {
              this.setContent( $(this.original).val() )
              $(this.original).hide()
            } else {
              this.saveContent()
              $(this.original).show()
            }
            this.viewHTML = !( this.viewHTML )
          }
        }
      }
    })
  })
